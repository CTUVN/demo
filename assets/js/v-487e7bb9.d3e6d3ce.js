(self.webpackChunk=self.webpackChunk||[]).push([[3070],{5680:(s,n,e)=>{"use strict";e.r(n),e.d(n,{data:()=>a});const a={key:"v-487e7bb9",path:"/advanced/cookbook/usage-of-client-app-enhance.html",title:"Usage of Client App Enhance",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"Register Vue Components",slug:"register-vue-components",children:[]},{level:2,title:"Use Non-SSR-Friendly Features",slug:"use-non-ssr-friendly-features",children:[]},{level:2,title:"Use Router Methods",slug:"use-router-methods",children:[]}],filePathRelative:"advanced/cookbook/usage-of-client-app-enhance.md",git:{}}},8952:(s,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>rs});var a=e(6252);const l=(0,a.Wm)("h1",{id:"usage-of-client-app-enhance",tabindex:"-1"},[(0,a.Wm)("a",{class:"header-anchor",href:"#usage-of-client-app-enhance","aria-hidden":"true"},"#"),(0,a.Uk)(" Usage of Client App Enhance")],-1),p=(0,a.Uk)("The "),o=(0,a.Uk)("clientAppEnhanceFiles"),t=(0,a.Uk)(" hook of Plugin API allows you to set the path to the client app enhance files. You can use it in your plugin or theme:"),r=(0,a.uE)('<div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">path</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/utils&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">pluginOrTheme</span><span style="color:#D4D4D4;"> = {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">clientAppEnhanceFiles:</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">path</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">resolve</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">__dirname</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;./path/to/clientAppEnhance.ts&#39;</span><span style="color:#D4D4D4;">),</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>',1),c=(0,a.Uk)("Then create a "),D=(0,a.Wm)("code",null,"clientAppEnhance.ts",-1),i=(0,a.Uk)(" file. You can make use of the "),y=(0,a.Uk)("defineClientAppEnhance"),u=(0,a.Uk)(" helper to get the types hint. Notice that the function can be either synchronous or asynchronous."),d=(0,a.uE)('<div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">defineClientAppEnhance</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">defineClientAppEnhance</span><span style="color:#D4D4D4;">(({ </span><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">router</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">siteData</span><span style="color:#D4D4D4;"> }) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// ...</span></span>\n<span class="line"><span style="color:#D4D4D4;">})</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>',1),C=(0,a.Uk)("The "),m=(0,a.Wm)("code",null,"app",-1),h=(0,a.Uk)(" is the Vue application instance that created by "),b={href:"https://v3.vuejs.org/api/application-api.html",target:"_blank",rel:"noopener noreferrer"},f=(0,a.Uk)("createApp"),g=(0,a.Uk)("."),E=(0,a.Uk)("The "),k=(0,a.Wm)("code",null,"router",-1),v=(0,a.Uk)(" is the Vue Router instance that created by "),U={href:"https://next.router.vuejs.org/api/#createrouter",target:"_blank",rel:"noopener noreferrer"},F=(0,a.Uk)("createRouter"),W=(0,a.Uk)("."),A=(0,a.Uk)("The "),w=(0,a.Wm)("code",null,"siteData",-1),_=(0,a.Uk)(" is an object that generated from user config, including "),x=(0,a.Uk)("base"),R=(0,a.Uk)(", "),S=(0,a.Uk)("lang"),M=(0,a.Uk)(", "),T=(0,a.Uk)("title"),j=(0,a.Uk)(", "),I=(0,a.Uk)("description"),V=(0,a.Uk)(", "),N=(0,a.Uk)("head"),P=(0,a.Uk)(" and "),O=(0,a.Uk)("locales"),Y=(0,a.Uk)("."),B=(0,a.Wm)("p",null,"The client app enhance will be invoked after the client app is created. It's possible to implement any enhancements to the Vue application.",-1),G=(0,a.Wm)("div",{class:"custom-container tip"},[(0,a.Wm)("p",{class:"custom-container-title"},"TIP"),(0,a.Wm)("p",null,[(0,a.Uk)("For ease of use in user config, the "),(0,a.Wm)("code",null,".vuepress/clientAppEnhance.{js,ts}"),(0,a.Uk)(" file will be used as the client app enhance file implicitly, unless you set "),(0,a.Wm)("code",null,"clientAppEnhanceFiles"),(0,a.Uk)(" explicitly in the config file.")])],-1),L=(0,a.Wm)("h2",{id:"register-vue-components",tabindex:"-1"},[(0,a.Wm)("a",{class:"header-anchor",href:"#register-vue-components","aria-hidden":"true"},"#"),(0,a.Uk)(" Register Vue Components")],-1),H=(0,a.Uk)("You can register global Vue components via the "),q={href:"https://v3.vuejs.org/api/application-api.html#component",target:"_blank",rel:"noopener noreferrer"},z=(0,a.Uk)("component"),J=(0,a.Uk)(" method:"),K=(0,a.uE)('<div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">defineClientAppEnhance</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/client&#39;</span></span>\n<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">MyComponent</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;./MyComponent.vue&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">defineClientAppEnhance</span><span style="color:#D4D4D4;">(({ </span><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">router</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">siteData</span><span style="color:#D4D4D4;"> }) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">component</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;MyComponent&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">MyComponent</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">})</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="use-non-ssr-friendly-features" tabindex="-1"><a class="header-anchor" href="#use-non-ssr-friendly-features" aria-hidden="true">#</a> Use Non-SSR-Friendly Features</h2><p>VuePress will generate a SSR application to pre-render pages during build. Generally speaking, if a code snippet is using Browser / DOM APIs before client app is mounted, we call it non-SSR-friendly.</p>',3),Q=(0,a.Uk)("We already provides a "),X=(0,a.Uk)("ClientOnly"),Z=(0,a.Uk)(" component to wrap non-SSR-friendly content."),$=(0,a.Uk)("In client app enhance files, you can make use of the "),ss=(0,a.Wm)("code",null,"__SSR__",-1),ns=(0,a.Uk)(" flag for that purpose."),es=(0,a.uE)('<div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">defineClientAppEnhance</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">defineClientAppEnhance</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">async</span><span style="color:#D4D4D4;"> ({ </span><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">router</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">siteData</span><span style="color:#D4D4D4;"> }) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#9CDCFE;">__SSR__</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">nonSsrFriendlyModule</span><span style="color:#D4D4D4;"> = </span><span style="color:#C586C0;">await</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;non-ssr-friendly-module&#39;</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// ...</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"><span style="color:#D4D4D4;">})</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="use-router-methods" tabindex="-1"><a class="header-anchor" href="#use-router-methods" aria-hidden="true">#</a> Use Router Methods</h2>',2),as=(0,a.Uk)("You can make use of the "),ls={href:"https://next.router.vuejs.org/api/#router-methods",target:"_blank",rel:"noopener noreferrer"},ps=(0,a.Uk)("Router Methods"),os=(0,a.Uk)(" that provided by vue-router. For example, add navigation guard:"),ts=(0,a.uE)('<div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">defineClientAppEnhance</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">defineClientAppEnhance</span><span style="color:#D4D4D4;">(({ </span><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">router</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">siteData</span><span style="color:#D4D4D4;"> }) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">router</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">beforeEach</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">to</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;before navigation&#39;</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">  })</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">router</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">afterEach</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">to</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;after navigation&#39;</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">  })</span></span>\n<span class="line"><span style="color:#D4D4D4;">})</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>It&#39;s not recommended to use <code>addRoute</code> method to add dynamic routes here, because those routes will <strong>NOT</strong> be pre-rendered in build mode.</p><p>But you can still do that if you understand the drawback.</p></div>',2),rs={render:function(s,n){const e=(0,a.up)("RouterLink"),rs=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.j4)(a.HY,null,[l,(0,a.Wm)("p",null,[p,(0,a.Wm)(e,{to:"/reference/plugin-api.html#clientappenhancefiles"},{default:(0,a.w5)((()=>[o])),_:1}),t]),r,(0,a.Wm)("p",null,[c,D,i,(0,a.Wm)(e,{to:"/reference/client-api.html#defineclientappenhance"},{default:(0,a.w5)((()=>[y])),_:1}),u]),d,(0,a.Wm)("ul",null,[(0,a.Wm)("li",null,[C,m,h,(0,a.Wm)("a",b,[f,(0,a.Wm)(rs)]),g]),(0,a.Wm)("li",null,[E,k,v,(0,a.Wm)("a",U,[F,(0,a.Wm)(rs)]),W]),(0,a.Wm)("li",null,[A,w,_,(0,a.Wm)(e,{to:"/reference/config.html#base"},{default:(0,a.w5)((()=>[x])),_:1}),R,(0,a.Wm)(e,{to:"/reference/config.html#lang"},{default:(0,a.w5)((()=>[S])),_:1}),M,(0,a.Wm)(e,{to:"/reference/config.html#title"},{default:(0,a.w5)((()=>[T])),_:1}),j,(0,a.Wm)(e,{to:"/reference/config.html#description"},{default:(0,a.w5)((()=>[I])),_:1}),V,(0,a.Wm)(e,{to:"/reference/config.html#head"},{default:(0,a.w5)((()=>[N])),_:1}),P,(0,a.Wm)(e,{to:"/reference/config.html#locales"},{default:(0,a.w5)((()=>[O])),_:1}),Y])]),B,G,L,(0,a.Wm)("p",null,[H,(0,a.Wm)("a",q,[z,(0,a.Wm)(rs)]),J]),K,(0,a.Wm)("p",null,[Q,(0,a.Wm)(e,{to:"/reference/components.html#clientonly"},{default:(0,a.w5)((()=>[X])),_:1}),Z]),(0,a.Wm)("p",null,[$,(0,a.Wm)(e,{to:"/reference/client-api.html#ssr"},{default:(0,a.w5)((()=>[ss])),_:1}),ns]),es,(0,a.Wm)("p",null,[as,(0,a.Wm)("a",ls,[ps,(0,a.Wm)(rs)]),os]),ts],64)}}}}]);